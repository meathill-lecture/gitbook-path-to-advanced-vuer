彻底解决不渲染
=============

学会解决所有“数据更新不渲染”的问题，是你离开 Vue 新手村之前接到的最后一个主线任务。解完这个任务，你就会离开新手村，来到大陆上最大的城市爪哇斯克瑞普，开始真正的前端大冒险。

要解掉这个任务，你必须：

1. 理解 Vue 双向绑定的实现机制
2. 能够使用工具检查双向绑定
3. 推测代码是否有问题

如果你能好好读懂 Vue 的代码，自然这些难点都困不住你，不过作为屠龙记，这个时候去学习它，对于我们来说为时尚早。那么，就请随我按照由浅入深的方式来解决这个任务吧。

神奇的 MVVM
-----------

我们将时间稍稍往回拨一点，看看 UI 技术的发展，和 MVVM 的诞生。

图形界面诞生后，软件行业将越来越多现实中存在已久的东西搬到计算机屏幕上，比如表单、比如各类印刷内容。接下来，更简单更好维护的描述性语言（HTML、CSS）登场，写 UI 不再是专业程序员的工作（我当年也是作为页面仔入行的）。再接下来，大家发现，无论你的业务逻辑如何变化，但是大体上，抽象的数据流动只有两个方向：

1. 用户操作视觉元素，产生事件，侦听这些事件，我们得知用户想要怎样操作数据
2. 数据跟新后，立刻更新视图，让用户能够看到最新的数据

前者即“视图 => 数据”绑定，后者即“数据 => 视图”绑定。二者合二为一，就是我们常说的“数据、视图双向绑定”，简称“双向绑定”。这是 MVVM 模式的基础。MVVM 模式希望把“双向绑定”在框架里实现，这样开发者就可以忽略这部分代码，放心大胆的搞业务逻辑去了。事实证明，基于 MVVM 的代码行数，基本只有基于 MVP 的 1/10，效果非常明显。

要实现这一点并不容易。更新视图不难，HTML 是描述性语言，本身没有逻辑，非常容易解析，也非常容易模板化。难点在于如何准确地以最小化更新视图。这当然难不倒已经摸清方向的开发者，很快，数种不同的 Web 前端数据双向绑定方案开始齐头并进。它们的基础逻辑是相似的：

1. 使用模板而不是 HTML 写页面
2. 模板会被编译成 JS 函数
3. 对函数进行预处理，提取依赖
4. 当依赖的值变化时，更新相关视图

又经过几年发展，现在 MVVM 框架殊途同归，都选择“虚拟 DOM”作为最小化更新视图的基础。大家的差别主要在于：何时检查虚拟 DOM。

Vue 的神力源泉：`Object.defineProperty`
--------------------------------------
